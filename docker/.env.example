# ============================================
# ONLYOFFICE 生产环境配置模板
# 复制此文件为 .env 并修改配置
# ============================================

# -------------------- 端口配置 --------------------
# ONLYOFFICE Document Server 端口（如被占用请修改）
ONLYOFFICE_PORT=8080

# 后端服务端口（如被占用请修改）
BACKEND_PORT=3000

# Nginx 代理端口（HTTP）
NGINX_HTTP_PORT=80

# Nginx 代理端口（HTTPS）
NGINX_HTTPS_PORT=443

# -------------------- 安全配置 --------------------
# JWT 密钥（生产环境必须修改为强密码）
# 建议使用: openssl rand -hex 32 生成
JWT_SECRET=your-super-secret-key-change-in-production

# JWT Token 过期时间（秒）
JWT_EXPIRES_IN=3600

# -------------------- 网络配置 --------------------
# 部署模式: intranet（内网）/ internet（外网）
DEPLOY_MODE=intranet

# 协议: http / https
PROTOCOL=http

# 服务域名或IP（外网填域名，内网填IP）
# 内网示例: 192.168.1.100
# 外网示例: docs.example.com
SERVER_HOST=localhost

# -------------------- ONLYOFFICE 配置 --------------------
# ONLYOFFICE 对外访问地址（前端使用）
# 内网: http://192.168.1.100:8080
# 外网: https://docs.example.com
DOCUMENT_SERVER_URL=http://localhost:8080

# ONLYOFFICE 内部访问地址（后端使用，Docker 网络内）
DOCUMENT_SERVER_INTERNAL_URL=http://onlyoffice:80

# -------------------- 后端配置 --------------------
# 后端服务对外地址（ONLYOFFICE 回调使用）
# 内网: http://192.168.1.100:3000
# 外网: https://api.example.com
BACKEND_URL=http://localhost:3000

# 后端服务内部地址（Docker 网络内，供 ONLYOFFICE 回调）
# Windows Docker: http://host.docker.internal:3000
# Linux Docker（host 模式）: http://localhost:3000
# Linux Docker（bridge 模式）: http://backend:3000
BACKEND_CALLBACK_URL=http://host.docker.internal:3000

# -------------------- 文件存储配置 --------------------
# 文档存储路径（相对于项目根目录）
UPLOAD_DIR=./uploads

# 最大文件大小（MB）
MAX_FILE_SIZE=100

# 允许的文件类型
ALLOWED_FILE_TYPES=docx,xlsx,pptx,doc,xls,ppt,odt,ods,odp,pdf

# -------------------- SSL 配置（HTTPS 时需要）--------------------
# SSL 证书路径
SSL_CERT_PATH=./certs/fullchain.pem

# SSL 私钥路径
SSL_KEY_PATH=./certs/privkey.pem

# -------------------- 日志配置 --------------------
# 日志级别: debug, info, warn, error
LOG_LEVEL=info

# 日志存储路径
LOG_DIR=./logs

# -------------------- 数据库配置（可选，用于文档元数据）--------------------
# 数据库类型: none, mysql, postgresql
# DB_TYPE=none
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=onlyoffice
# DB_USER=root
# DB_PASSWORD=password
